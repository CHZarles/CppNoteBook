# Nginx 配置文件示例
# 将此配置添加到 /etc/nginx/sites-available/default 或创建新的站点配置

server {
    listen 80;
    server_name localhost;
    
    # 文档根目录
    root /var/www/html;
    index index.html index.htm;
    
    # 静态文件处理
    location / {
        try_files $uri $uri/ =404;
    }
    
    # CGI 程序处理
    location /cgi-bin/ {
        # CGI 程序目录
        root /usr/lib;
        
        # 设置 fastcgi 参数
        fastcgi_pass unix:/var/run/fcgiwrap.socket;
        include /etc/nginx/fastcgi_params;
        
        # 设置脚本文件名
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
    }
    
    # 错误页面
    error_page 404 /404.html;
    error_page 500 502 503 504 /50x.html;
    
    # 日志配置
    access_log /var/log/nginx/cgi_access.log;
    error_log /var/log/nginx/cgi_error.log;
}

# 如果不使用 fcgiwrap，可以使用以下简单 CGI 配置：
# 注意：这需要编译支持 CGI 的 Nginx 或使用第三方模块

# server {
#     listen 80;
#     server_name localhost;
#     
#     root /var/www/html;
#     index index.html;
#     
#     location / {
#         try_files $uri $uri/ =404;
#     }
#     
#     # 简单 CGI 配置（需要 nginx-extras 包或重新编译）
#     location ~ ^/cgi-bin/(.+\.cgi)$ {
#         gci_pass 127.0.0.1:9000;
#         gci_param SCRIPT_FILENAME /usr/lib/cgi-bin/$1;
#         include fastcgi_params;
#     }
# }
